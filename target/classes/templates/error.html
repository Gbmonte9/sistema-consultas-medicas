<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Erro - Sistema Médico</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css"> 
</head>
<body class="bg-dark text-white d-flex justify-content-center align-items-center vh-100">

<div class="text-center">
    <h1 class="display-1 fw-bold">Ops!</h1>
    <p class="fs-3"> <span id="errorCode">Erro</span> - <span id="errorMessage">Algo deu errado.</span></p>
    <p class="lead">
        Tente voltar para a <a href="/login" class="text-decoration-none text-white">página inicial</a>.
    </p>
    <button onclick="voltar()" class="btn btn-dark mt-3">Voltar</button>
</div>

<script>
    /**
     * Tenta voltar para a página anterior, ou redireciona para o login 
     * se não houver histórico de navegação para evitar ficar preso.
     */
    function voltar() {
        if (window.history.length > 1) {
            window.history.back();
        } else {
            // Se não houver histórico, vá diretamente para a página de login.
            window.location.href = '/login'; 
        }
    }
    
    // Captura os parâmetros de erro da URL (ex: ?code=400&msg=Email%20duplicado)
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");
    const msg = params.get("msg");

    // Exibe o código e a mensagem se eles existirem na URL
    if(code) document.getElementById("errorCode").textContent = code;
    if(msg) document.getElementById("errorMessage").textContent = decodeURIComponent(msg); // Usa decodeURIComponent para exibir espaços e acentos
</script>
<script src="/js/bootstrap.bundle.min.js"></script>
</body>
</html>